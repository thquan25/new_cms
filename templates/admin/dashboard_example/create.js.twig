<script>
    $(document).ready(function() {
        $('#btn-add-category').on('click', function() {
            $('#add-category').modal('show');
        });

        $('#form-new-category').on('submit', function(event) {
            event.preventDefault();

            var data = {
                name: $(this).find('input[name="category_name"]').val(),
                status: $(this).find('input[name="category_status"]').is(':checked') ? 1 : 0,
                token: '{{ csrf_token('add-category') }}',
            };

            $.ajax({
                url: '{{ path('admin_store_article_category') }}',
                type: 'post',
                dataType: 'text',
                data: data
            }).done(function(resp) {
                if (resp == 'Success') {
                    clear_modal('#add-category');
                    add_category_select();
                } else {
                    show_error(resp, '#add-category-error');
                }
            });
        });
    });

    function clear_modal(element) {
        console.log('clear modal');
        $(element).find('form').trigger('reset');
        $(element).modal('hide');
    }

    function show_error(message, element) {
        console.log('show error');
        $(element).html(message).show();
    }
</script>
